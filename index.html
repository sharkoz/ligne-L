<!DOCTYPE html>
<!--
<html xmlns:ng="http://angularjs.org" id="ng-app" ng-app="ligneL" manifest="app.manifest">
-->
<html xmlns:ng="http://angularjs.org" id="ng-app" ng-app="ligneL">
 <head>
<title>Transilien</title>
<link href="css/style.css" media="screen" rel="stylesheet" type="text/css">

<!--[if lte IE 8]>
      <script src="lib/json-3.min.js"></script>
    <![endif]-->
<meta charset="UTF-8">
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

 <body>
 
 <div data-role="page">
 
 <div role="main" class="ui-content" ng-controller="AppCtrl">
 
 <div class="header">
	<div class="width">
		<span class="menubutton" ng-click="$scope.showOptions(); GlobalOptions =! GlobalOptions; network='online'; $scope.$apply()"> </span>
		<h1>Horaires Transilien</h1>
		<div class="corner_network ng-cloak" ng-cloak>
			<object ng-show="!network" style="height:30px;width:30px;" type="image/svg+xml" data="./img/iconmonstr-wireless-6-icon.svg">Net</object>
			<object ng-show="network == 'online'" style="height:30px;width:30px;" type="image/svg+xml" data="./img/iconmonstr-wireless-6-icon_online.svg">Net</object>
			<object ng-show="network == 'offline'" style="height:30px;width:30px;" type="image/svg+xml" data="./img/iconmonstr-wireless-6-icon_offline.svg">Net</object>
		</div>
		<div class="corner_location" ng-click="local()"><img class="{{gpsloading}}" alt="GPS" style="height:30px;width:30px;" src="./img/iconmonstr-crosshair-6-icon.svg"/></div>
	</div>
 </div>
	<!--<div id='slider{{$id}}' class='swipe {{GlobalOptions}}' ng-show="GlobalOptions"><div class='swipe-wrap'><div>a</div><div>-->
	<div id='slider' class='swipe cardswidth' ng-show="GlobalOptions"><div class='swipe-wrap'><div>a</div><div class="cardswidth">
	<div id="top" class="metacard card ng-cloak" ng-cloak  >
			<h1>Parametres globaux</h1><div class="corner_config" ng-click="mySwipe.next()">x</div>
			<i>Chemin : </i>{{apiUrl}}<br>
			<i>Purger le LocalStorage : </i><input name="submit" type="submit" value="Purge" ng-click="$storage.$reset()"/><br>
			Trains max : 
			<fieldset data-role="controlgroup">
			<input type="range" name="max" ng-model="$storage.max" id="slider-1" min="1" max="15" value="5" data-popup-enabled="true">{{$storage.max}}
			</fieldset>
		</div>
	</div><div> .</div></div></div>
<div class="cardswidth" ng-controller="HorairesCtrl" ng-cloak>
	<div class="metacard" ng-repeat="trajet in param.trajet | orderBy:'dist'" ng-controller="TrajetCtrl">		
			<div class="">
				<figure class="card front {{$scope.cflip}}">
					<h2>{{gare[trajet.depart]}} à <strong ng-show"localise">{{trajet.dist}}</strong>m</h2> 
					<div class="corner_refresh {{jsonloading}}" ng-click="broadcastRefresh()"><img style="height:18px;width:18px;" src="./img/iconmonstr-refresh-5-icon.svg" alt="MaJ"/></div>
					<div class="corner_config" ng-click="$scope.cflip = 'flipped'">i</div>
					<h3>Vers {{gare[trajet.arrivee]}}</h3>
					<table class="horaires">
						<tbody>
							<!--<tr><td style="text-align:center;">Heure</td><td>Direction</td><td>Voie</td></tr>-->
							<tr ng-repeat="train in trajet.display">
								<td style="text-align:center;"><b>{{train.date.val | limitTo:-5}}</b><br/><span class='retard c{{train.delta}}'>{{train.message}}</span></td>
								<td><i></i>{{gare[train.term]}}</td> 
								<td style="text-align:center;"><div title="{{train.num}}" ng-show="train.voie != '-'" class="voie">{{train.voie}}</div>
									<div title="{{train.num}}" ng-hide="train.voie != '-'">-</div>
								</td>
							</tr>
						</tbody>
					</table>
				</figure>
				<figure class="card back {{$scope.cflip}}">
					Paramétrer la carte :<br>
					Depart : {{gare[trajet.depart]}}
					<input type="text" ng-model="autoDepart"  placeholder="{{gare[trajet.depart]}}" ng-change="getLocation()">
					<div ng-show="autoShow">
							<div class="autocomplete" ng-repeat="index in DepartList" ng-click="$parent.autoDepart = '{{index.name}}'; $parent.trajet.depart = '{{index.codeTR3A}}'; $parent.trajet.depart_pos = {'latitude':'{{index.latitude}}','longitude':'{{index.longitude}}'}; $parent.autoShow = 0;"><a>{{index.name}} <span><img ng-repeat="im in index.lignes" src="./img/{{im.idLigne}}.svg" height="22"></img></span></a></div>
					</div>
					<div ng-hide="autoShow">
						<br/>Arrivée :
						<SELECT ng-model="trajet.arrivee" ng-change="jsoncall()">
							<!--OPTION value="0">Toutes directions</OPTION>-->
							<OPTION ng-repeat="index in ListeGares | orderBy:'value'" value="{{index.key}}" ng-selected="index.key==trajet.arrivee">{{index.value}} {{$scope.calculateDistance($scope.GareLoc[index.key],$scope.pos)}}(m)</OPTION>
						</SELECT>
						<input name="submit" type="submit" value="Sauvegarder" ng-click="jsonSave(); jsonCall(); $scope.cflip = ''"/>
						<input name="submit" type="submit" value="Supprimer trajet" ng-click="$scope.cflip = ''; $parent.param.trajet.splice($index,1); options=!options"/>
					</div>
				</figure>
			</div>
	</div>
	<div class="metacard">		
			<div class="">
				<figure class="card front" ng-click="addTrajet()">
<input type="image" style="height:60px;width:60px;display: block;margin-left: auto;margin-right: auto;" src="./img/iconmonstr-plus-5-icon.svg" ng-click="$scope.local();" alt="Ajouter une gare">
				</figure>
			</div>
	</div>
</div>
	<div class="footer">  </div>
</div>
</div>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45793940-1', 'rlier.fr ');
  ga('send', 'pageview');

</script>
<script src="lib/angular.min.js"></script>
<script src="lib/angular-resource.min.js"></script>
<script src="lib/angular-route.min.js"></script>
<script src="lib/ngStorage.min.js"></script>

<script src="phonegap.js"></script>
<script src="js/app.js"></script>
<script src="js/services.js"></script>
<script src="js/controllers.js"></script> 
<script src="lib/prefixfree.min.js"></script>
<script src="lib/swipe.js"></script>
</div>
</div>
  </body>
</html>